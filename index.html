<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TG English Master | Contenu Inclus</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-slate-50 min-h-screen pb-20">

    <nav class="bg-white border-b sticky top-0 z-50 flex justify-between items-center px-4 h-14 shadow-sm">
        <span class="font-black text-emerald-600 italic">TG MASTER</span>
        <button onclick="openAdmin()" class="bg-gray-100 p-2 rounded-lg text-gray-400"><i class="fas fa-plus"></i> Admin</button>
    </nav>

    <main class="max-w-xl mx-auto p-4">
        
        <div id="fixed-content" class="space-y-6 mb-8">
            <h2 class="font-black text-gray-800 text-sm tracking-widest uppercase border-l-4 border-emerald-500 pl-2">ðŸ“– LEÃ‡ONS INCLUSES</h2>
            
            <div class="bg-white p-4 rounded-xl border shadow-sm">
                <h3 class="font-bold text-emerald-700">The Passive Voice</h3>
                <p class="text-xs text-gray-600 mt-2">Structure: Subject + BE + Past Participle.<br>Ex: "A bridge is being built in LomÃ©."</p>
            </div>

            <div class="bg-white p-4 rounded-xl border shadow-sm">
                <h3 class="font-bold text-emerald-700">Reported Speech</h3>
                <p class="text-xs text-gray-600 mt-2">RÃ¨gle: Present devient Past. Will devient Would.<br>Ex: He said: "I am hungry" -> He said he was hungry.</p>
            </div>
        </div>

        <div id="fixed-quiz" class="space-y-4 mb-8">
            <h2 class="font-black text-gray-800 text-sm tracking-widest uppercase border-l-4 border-blue-500 pl-2">ðŸŽ¯ EXERCICES INCLUS</h2>
            
            <div class="bg-white p-4 rounded-xl border shadow-sm">
                <p class="font-bold text-sm mb-3">Koffi said: "I will call you." (Reported Speech)</p>
                <button onclick="alert('Bravo !')" class="w-full p-2 mb-2 bg-slate-50 border rounded text-xs text-left">Koffi said he would call me.</button>
                <button onclick="alert('Faux')" class="w-full p-2 bg-slate-50 border rounded text-xs text-left">Koffi said he will call me.</button>
            </div>
        </div>

        <hr class="my-8 border-gray-300">

        <div id="dynamic-area" class="space-y-6">
            <h2 class="font-black text-gray-400 text-[10px] tracking-widest uppercase text-center">NouveautÃ©s ajoutÃ©es par le Prof</h2>
            <div id="area-lessons" class="space-y-4"></div>
            <div id="area-exercises" class="space-y-4"></div>
        </div>

        <div id="sec-admin" class="hidden fixed inset-0 bg-white z-[60] p-6 overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="font-black text-xl">AJOUTER DU CONTENU</h2>
                <button onclick="closeAdmin()" class="text-red-500 font-bold">FERMER</button>
            </div>
            <div class="space-y-6">
                <div class="bg-gray-50 p-4 rounded-xl border">
                    <input id="l-title" type="text" placeholder="Titre de la leÃ§on" class="w-full p-2 mb-2 border rounded">
                    <textarea id="l-body" placeholder="Contenu de la leÃ§on..." class="w-full p-2 border rounded h-24"></textarea>
                    <button onclick="addL()" class="w-full bg-emerald-600 text-white py-2 rounded font-bold">Publier le cours</button>
                </div>
                <div class="bg-gray-50 p-4 rounded-xl border">
                    <input id="e-q" type="text" placeholder="Question du quiz" class="w-full p-2 mb-2 border rounded">
                    <input id="e-o1" type="text" placeholder="RÃ©ponse correcte" class="w-full p-2 mb-2 border rounded">
                    <input id="e-o2" type="text" placeholder="RÃ©ponse fausse" class="w-full p-2 mb-2 border rounded">
                    <button onclick="addE()" class="w-full bg-blue-600 text-white py-2 rounded font-bold">Publier l'exercice</button>
                </div>
            </div>
        </div>
    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const config = {
            apiKey: "AIzaSyASujWlHumT3dsmiS03wdYdElds9Agmdgg",
            authDomain: "sadaqa-46de4.firebaseapp.com",
            databaseURL: "https://sadaqa-46de4-default-rtdb.firebaseio.com",
            projectId: "sadaqa-46de4",
            storageBucket: "sadaqa-46de4.firebasestorage.app",
            appId: "1:1079715124181:web:2a768b127872dbc6db235c"
        };

        const app = initializeApp(config);
        const db = getDatabase(app);

        // SYNC AVEC FIREBASE POUR TES AJOUTS PERSONNELS
        onValue(ref(db, 'lessons'), (s) => {
            const area = document.getElementById('area-lessons'); area.innerHTML = "";
            s.forEach(c => {
                const l = c.val();
                area.innerHTML += `<div class='bg-emerald-50 p-4 rounded-xl border border-emerald-200 shadow-sm'><h3 class='font-bold text-emerald-800'>${l.title}</h3><p class='text-xs mt-2'>${l.body}</p></div>`;
            });
        });

        onValue(ref(db, 'exercises'), (s) => {
            const area = document.getElementById('area-exercises'); area.innerHTML = "";
            s.forEach(c => {
                const e = c.val();
                area.innerHTML += `<div class='bg-blue-50 p-4 rounded-xl border border-blue-200 shadow-sm'><p class='font-bold text-sm mb-3'>${e.q}</p><button onclick="alert('Correct')" class='w-full p-2 mb-2 bg-white border rounded text-xs text-left'>${e.o1}</button><button onclick="alert('Faux')" class='w-full p-2 bg-white border rounded text-xs text-left'>${e.o2}</button></div>`;
            });
        });

        window.addL = () => { push(ref(db, 'lessons'), {title:document.getElementById('l-title').value, body:document.getElementById('l-body').value}); alert("AjoutÃ© !"); closeAdmin(); };
        window.addE = () => { push(ref(db, 'exercises'), {q:document.getElementById('e-q').value, o1:document.getElementById('e-o1').value, o2:document.getElementById('e-o2').value}); alert("AjoutÃ© !"); closeAdmin(); };
        window.openAdmin = () => { if(prompt("Code :") === "228") document.getElementById('sec-admin').classList.remove('hidden'); };
        window.closeAdmin = () => { document.getElementById('sec-admin').classList.add('hidden'); };
    </script>
</body>
</html>
